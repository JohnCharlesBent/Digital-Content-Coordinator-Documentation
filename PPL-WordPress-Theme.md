# ProvLib.org WordPress Theme
----
An overview of the structure of the PPL site theme. Initially designed and developed by Oomph Inc.

##### Quick Links
+ [Directory Structure](#directory-structure)
+ [Custom Post Types](#custom-post-types)
+ [Template Parts](#template-parts)
+ [Theme Functions](#custom-theme-functions)

## Directory Structure
---
:file_folder: **ppl**

+ :open_file_folder: **images** - contains images used in the theme as section backgrounds and icons.
+ :open_file_folder: **inc** - contains several function files that are included in the functions.php file.  Functions that generate [shortcodes](https://github.com/JohnProvidence/Digital-Content-Coordinator-Documentation/blob/master/ProvLib-Shortcodes.md#capital-campaign-row), set-up admin options pages, define admin forms, and define widget areas are found here.
+ :open_file_folder: **js** - Javascript files
  - :page_facing_up: **customizer.js** - javascript for [WordPress Customizer](https://en.support.wordpress.com/customizer/)
  - :page_facing_up: **exhibition2019.js** - code that plots exhibition locations to a google map using the Google Maps API and the Google Maps GeoCoder API - this needs to have the new Goggle API keys added on line 113 (variable API_KEY).
  - :page_facing_up: **highcharts.js** - highcharts javascript code library. This is being used to display a couple of charts on [this page](https://www.provlib.org/teen-squad-overview/)
  - :page_facing_up: **locations.json** - an array of exhibition locations that are being called in the **exhibitions2019.js** file. This array feeds the locations displayed on the Google Map.
  - :page_facing_up: **navigation.js** - javascript that handles the toggle of the main navigation for small screens.
  - :page_facing_up: **ppl.js** - javascript file for functions used throughout ppl theme.
  - :page_facing_up: **skip-link-focus-fix.js** - javscript for keyboard only users.
  - :page_facing_up: **teen-squad.js** - parses json files used to pull Teen Squad IMLS grant data into [the Teen Squad IMLS Grant section](https://www.provlib.org/teen-squad-overview/). The json data is generated by a plugin file that reads a google spreadsheet and a google drive.
+ :open_file_folder: **layouts** - css files for sidebars and some global page builder styles.
  - :page_facing_up: **content-sidebar.css**
  - :page_facing_up: **ppl_styles.css** - global page builder styles defined by Oomph.
  - :page_facing_up: **sidebar-content.css**
+ :open_file_folder: **node_modules** - this folder is only found locally. It contains open source javascript task running tools installed using [npm js](https://www.npmjs.com/) that are used in local development. This file is ignored by git and is not pushed to Pantheon.
+ :open_file_folder: **scss** - SCSS files. These are compiled and minified into style.css (the themes css file).
  - :open_file_folder: **partials** - contains various scss files that define styles for different parts of the site. Also contains the _variables.css file, which defines various [scss variables and mixins](https://sass-lang.com/guide).
    - :page_facing_up: **_alum.scss** - PPL Alum ppl_styles
    - :page_facing_up: **_calendar.scss** - Full Calendar style overrides. _General calendar styles are defined in the LibCal For WordPress plugin_.
    - :page_facing_up: **_cc.scss** - Captial Campaign page ppl_styles
    - :page_facing_up: **_events.scss** - Styles used for the Savor The Story section of the site.
    - :page_facing_up: **_exhibition2019.scss** - Styles used for the 2019 Exhibition series
    - :page_facing_up: **_exhibitions.scss** - Styles used for the Programs &amp; Exhibitions section of the site.
    - :page_facing_up: **_featuredRows.scss** - Styles used in various homepage rows, mainly the PPL in the Community row
    - :page_facing_up: **_forms.scss** - Styles used on all Blackbaud form embeds.
    - :page_facing_up: **_fundraising.scss** - Styles used on the PPL Fundraising Message row. Currently displayed at the very top of ProvLib.org.
    - :page_facing_up: **_global.scss** - Global overrides for content found in page builder rows and templates.
    - :page_facing_up: **_highcharts.scss** - Styles for highcharts js charts
    - :page_facing_up: **_homepage.scss** - Styling for rows on the homepage - mainly the Think Again Capital Campaign row and the 2019 exhibition row.
    - :page_facing_up: **_hours.scss** - Styles for the library hours displayed via shortcode.
    - :page_facing_up: **_libguides.scss** - Styles for the Subject Guides section of the site. This section is not currently being used.
    - :page_facing_up: **_mq.scss** - media queries used to handle layout adjustments for responsive breakpoints. The breakpoints are defined in the _variables.scss file (they are all sass mixins).
    - :page_facing_up: **_oomph.scss** - the initial style sheet given to us by oomph.
    - :page_facing_up: **_passport.scss** - styles for the [Passport to Summer Learning](https://www.provlib.org/passport-to-summer-learning/)
    - :page_facing_up: **_pop-up.scss** - Styles for the site pop up window that displays on the homepage.
    - :page_facing_up: **_support.scss** - Styles for the Support Us page
    - :page_facing_up: **_teensquad.scss** - Styles for the Teen Squad IMLS grant section
    - :page_facing_up: **_variables.scss** - SASS variables and mixins used in all .scss files.
+ :open_file_folder: **template-parts** - template files that define the html structure for various pages / sections of the site.
    - :open_file_folder: **passport-sections** - sections used in the [Passport to Summer Learning](https://www.provlib.org/passport-to-summer-learning/). These files contain code to pull data out of Advanced Custom Fields.
    - :open_file_folder: **svg** - svg maps of each floor of the library. These are no longer being used.
    - :page_facing_up: **content-databases.php** - Displays Databases custom post type - this template is called on line 37 of single-databases.php.
    - :page_facing_up: **content-lib-guide.php** - Displays Subject Guides pages -- this page is not currently being used.
    - :page_facing_up: **content-none.php** - Displays a message if posts are not found
    - :page_facing_up: **content-page** - Template for displaying pages if Page Builder is not enabled for the page in question.
    - :page_facing_up: **content-post** - Template for displaying posts.
    - :page_facing_up: **content-search** - Search results page
    - :page_facing_up: **content-support** - Template for displaying the [Support Us page](https://www.provlib.org/support-us/)
    - :page_facing_up: **content.php** - Generic template for displaying content ...
    - :page_facing_up: **fundraising-message.php** - template for the fundraising message displayed at the top of the homepage.
    - :page_facing_up: **map-data.php** - This was used to display the library svg maps and pull data about each clickable portion of the floor plan to the page. This is no longer being used.
    - :page_facing_up: **ppl-pop-up.php** - Template for the pop up that displays on the homepage.
    - :page_facing_up: **sectional-tabbed.php** - Used in the LibGuides section of the site for a tabbed content guide. This is no longer being used.
    - :page_facing_up: **sectional.php** - Used in the LibGuides section of the site for a non-tabbed content guide. This is no longer being used.
    - :page_facing_up: **teaser-post.php** - Teaser post template...
+ :page_facing_up: **404.php** - 404 page template
+ :page_facing_up: **archive-databases.php** - Template for the [Databases custom post type archive page](https://www.provlib.org/databases/).
+ :page_facing_up: **archive-subject-guides.php** - Template for the Subject Guides custom post type archive page. This is no longer being used.
+ :page_facing_up: **archive.php** - Archive page template.
+ :page_facing_up: **comments.php** - Comments page. Comments on the site are disabled so this is not being used.
+ :page_facing_up: **footer-passport.php** - Footer being used on the [Passport to Summer Learning](https://www.provlib.org/passport-to-summer-learning/) page.
+ :page_facing_up: **footer.php** - Site Footer
+ :page_facing_up: **functions.php** - functions file. Defines theme functions. Many functions are defined in files found in the **inc/** directory.  Those files are included in this file.
+ :page_facing_up: **gulpfile.js** - javascript file used by npm.js task running tools. This is not part of the site theme, just used for local development.
+ :page_facing_up: **header-passport.php** - Header used on the Passport page.
+ :page_facing_up: **header-teensquad.php** - Header used on the Teen Squad IMLS section.
+ :page_facing_up: **header.php** - Site header.
